#light:
#  - platform: hue
#    scan_interval: 10
#  - platform: group
#    name: Spots Salon
#    entities:
#      - light.spot_bibliotheque
#      - light.spot_entree
#      - light.spot_salon
#      - light.spot_salon_couloir
#  - platform: group
#    name: Spots Couloir
#    entities:
#      - light.spot_couloir_1
#      - light.spot_couloir_2
#
sensor:
  - platform: hue
  - platform: template
    sensors:
        lux_hue_cuisine:
            entity_id: sensor.capteur_motion_cuisine
            friendly_name: Luminosité Cuisine (Hue Motion)
            unit_of_measurement: 'lux'
            value_template: '{{ float(10**((states.sensor.capteur_motion_cuisine.attributes.light_level-1)/10000)) | round(0) }}'
        temp_hue_cuisine:
            entity_id: sensor.capteur_motion_cuisine
            friendly_name: Température Cuisine (Hue Motion)
            unit_of_measurement: '°C'
            value_template: '{{ states.sensor.capteur_motion_cuisine.attributes.temperature| round(0) }}'
        lux_hue_chambre:
            entity_id: sensor.capteur_chambre_motion_ianto
            friendly_name: Luminosité Chambre Ianto (Hue Motion)
            unit_of_measurement: 'lux'
            value_template: '{{ float(10**((states.sensor.capteur_chambre_motion_ianto.attributes.light_level-1)/10000)) | round(0) }}'
        temp_hue_chambre:
            entity_id: sensor.capteur_chambre_motion_ianto
            friendly_name: Température Chambre Ianto (Hue Motion)
            unit_of_measurement: '°C'
            value_template: '{{ states.sensor.capteur_chambre_motion_ianto.attributes.temperature| round(0) }}'

binary_sensor:
  - platform: template
    sensors:
        motion_hue_cuisine:
            entity_id: sensor.capteur_motion_cuisine
            friendly_name: 'Mouvement Cuisine (Hue Motion)'
            device_class: motion
            value_template: "{{ is_state('sensor.capteur_motion_cuisine', 'on') }}"
            delay_off: 00:01:00
        motion_hue_chambre:
            entity_id: sensor.capteur_chambre_motion_ianto
            friendly_name: 'Mouvement Chambre Ianto (Hue Motion)'
            device_class: motion
            value_template: "{{ is_state('sensor.capteur_chambre_motion_ianto', 'on') }}"
            delay_off: 00:01:00
#
#group:
#    lumiere_piece:
#        name: Lumière Pièces
#        control: hidden
#        entities:
#          - light.salon
#          - light.couloir
#          - light.parents__chambre
#          - light.ianto__chambre
#          - light.zelda__chambre
#          - light.terrasse
#
#    spots_salon:
#        name: Spots Salon
#        entities:
#          - light.spot_bibliotheque
#          - light.spot_entree
#          - light.spot_salon
#          - light.spot_salon_couloir
#
#    lumiere_couloir:
#        name: Spots Couloir
#        entities:
#          - light.spot_couloir_1
#          - light.spot_couloir_2
#
#    lumieres_chambre:
#        name: Lumières Chambre
#        entities:
#          - light.plafond_chambre
#          - light.lampe_de_chevet_hugo
#          - light.lampe_de_chevet_vanessa
#
#    lumiere_chambre_enfant:
#        name: Lumière Chambre Enfant
#        entities:
#          - light.plafond_chambre_enfant
#          - light.lampe_chevet_ianto
#
#    lumiere_chambre_ami:
#        name: Lumière Chambre Ami
#        entities:
#          - light.lampe_chambre_damis
#          - light.hue_ambiance_candle_1
#
#    scene_hue:
#        name: Scène Hue
#        control: hidden
#        entities:
#          - script.hue_soiree_tv
#          - script.hue_veilleuse_hugo
#
#script:
#    hue_soiree_tv:
#        alias: Scène soirée TV
#        sequence:
#          - service: hue.hue_activate_scene
#            data:
#                group_name: "Salon"
#                scene_name: "Détente"
#    hue_veilleuse_hugo:
#        alias: Scène Veilleuse Hugo
#        sequence:
#          - service: hue.hue_activate_scene
#            data:
#                group_name: "Chambre"
#                scene_name: "Détente"
#    hue_debut_soiree:
#        alias: Début de soirée
#        sequence:
#          - service: hue.hue_activate_scene
#            data:
#                group_name: "Salon"
#                scene_name: "Lecture"

switch:
  - platform: flux
    start_time: '07:00'
    stop_time: '21:00'
    lights:
      - light.spot_bibliotheque
      - light.spot_entree
      - light.spot_salon
      - light.spot_salon_couloir
      - light.plafonnier_salon
      - light.lampe_du_cube
      - light.caisson_de_basse
    mode: xy

  - platform: flux
    name: "Flux Meuble TV"
    start_time: '07:00'
    stop_time: '21:00'
    lights:
      - light.meuble_tv
    mode: rgb
    brightness: 128
    
  - platform: flux
    name: "Flux Cuisine"
    start_time: '07:00'
    stop_time: '21:00'
    mode: mired
    disable_brightness_adjust: True
    lights:
      - light.cuisine

  - platform: flux
    name: "Flux Couloir"
    start_time: '07:00'
    stop_time: '21:00'
    mode: mired
    lights:
      - light.couloir
